!function(a){a.fn.priceFormat=function(b){var c={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1},b=a.extend(c,b);return this.each(function(){function q(a){c.is("input")?c.val(a):c.html(a)}function r(){return d=c.is("input")?c.val():c.html()}function s(a){for(var b="",c=0;c<a.length;c++)char_=a.charAt(c),0==b.length&&0==char_&&(char_=!1),char_&&char_.match(e)&&(j?b.length<j&&(b+=char_):b+=char_);return b}function t(a){for(;a.length<k+1;)a="0"+a;return a}function u(b,c){if(!c&&(""===b||b==u("0",!0))&&p)return"";var d=t(s(b)),e="",j=0;0==k&&(h="",l="");var l=d.substr(d.length-k,k),m=d.substr(0,d.length-k);if(d=0==k?m:m+h+l,i||""!=a.trim(i)){for(var q=m.length;q>0;q--)char_=m.substr(q-1,1),j++,j%3==0&&(char_=i+char_),e=char_+e;e.substr(0,1)==i&&(e=e.substring(1,e.length)),d=0==k?e:e+h+l}return!n||0==m&&0==l||(d=b.indexOf("-")!=-1&&b.indexOf("+")<b.indexOf("-")?"-"+d:o?"+"+d:""+d),f&&(d=f+d),g&&(d+=g),d}function v(a){var b=a.keyCode?a.keyCode:a.which,c=String.fromCharCode(b),e=!1,f=d,g=u(f+c);(b>=48&&b<=57||b>=96&&b<=105)&&(e=!0),8==b&&(e=!0),9==b&&(e=!0),13==b&&(e=!0),46==b&&(e=!0),37==b&&(e=!0),39==b&&(e=!0),!n||189!=b&&109!=b&&173!=b||(e=!0),!o||187!=b&&107!=b&&61!=b||(e=!0),e||(a.preventDefault(),a.stopPropagation(),f!=g&&q(g))}function w(){var a=r(),b=u(a);a!=b&&q(b),0==parseFloat(a)&&p&&q("")}function x(){c.val(f+r())}function y(){c.val(r()+g)}function z(){if(""!=a.trim(f)&&l){var b=r().split(f);q(b[1])}}function A(){if(""!=a.trim(g)&&m){var b=r().split(g);q(b[0])}}var c=a(this),d="",e=/[0-9]/;d=c.is("input")?c.val():c.html();var f=b.prefix,g=b.suffix,h=b.centsSeparator,i=b.thousandsSeparator,j=b.limit,k=b.centsLimit,l=b.clearPrefix,m=b.clearSuffix,n=b.allowNegative,o=b.insertPlusSign,p=b.clearOnEmpty;o&&(n=!0),c.bind("keydown.price_format",v),c.bind("keyup.price_format",w),c.bind("focusout.price_format",w),l&&(c.bind("focusout.price_format",function(){z()}),c.bind("focusin.price_format",function(){x()})),m&&(c.bind("focusout.price_format",function(){A()}),c.bind("focusin.price_format",function(){y()})),r().length>0&&(w(),z(),A())})},a.fn.unpriceFormat=function(){return a(this).unbind(".price_format")},a.fn.unmask=function(){var b,c="";b=a(this).is("input")?a(this).val():a(this).html();for(var d in b)isNaN(b[d])&&"-"!=b[d]||(c+=b[d]);return c}}(jQuery);