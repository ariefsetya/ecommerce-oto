!function(a){"use strict";var b,c;b='\t\t<div class="grid uls-menu uls-wide"> \t\t\t<div class="row"> \t\t\t\t<span id="uls-close" class="icon-close"></span> \t\t\t</div> \t\t\t<div class="row"> \t\t\t\t<div class="uls-title-region seven columns">\t\t\t\t\t<h1 data-i18n="uls-select-language" class="uls-title">Select Language</h1>\t\t\t\t</div>\t\t\t\t<div class="five columns map-block" id="map-block">\t\t\t\t\t<div class="row">\t\t\t\t\t\t<div data-regiongroup="1" id="uls-region-1" class="three columns uls-region uls-region-1">\t\t\t\t\t\t\t<a data-i18n="uls-region-WW">Worldwide</a>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="nine columns">\t\t\t\t\t\t\t<div class="row uls-worldmap">\t\t\t\t\t\t\t\t<div data-regiongroup="2" id="uls-region-2" class="four columns uls-region">\t\t\t\t\t\t\t\t\t<a data-i18n="uls-region-AM">America</a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div data-regiongroup="3" id="uls-region-3" class="four columns uls-region">\t\t\t\t\t\t\t\t\t<a><span data-i18n="uls-region-EU">Europe</span><br>\t\t\t\t\t\t\t\t\t<span data-i18n="uls-region-ME">Middle East</span><br>\t\t\t\t\t\t\t\t\t<span data-i18n="uls-region-AF">Africa</span></a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div data-regiongroup="4" id="uls-region-4" class="four columns uls-region">\t\t\t\t\t\t\t\t\t<a><span data-i18n="uls-region-AS">Asia</span><br>\t\t\t\t\t\t\t\t\t<span data-i18n="uls-region-PA">Pacific</span></a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div id="search" class="row search"> \t\t\t\t<div class="one column">\t\t\t\t\t<span class="search-label"></span>\t\t\t\t</div>\t\t\t\t<div class="ten columns">\t\t\t\t\t<div id="search-input-block" class="search-input-block">\t\t\t\t\t\t<input type="text" class="filterinput filtersuggestion" id="filtersuggestion" disabled="true"\t\t\t\t\t\t\tautocomplete="off" /> <input type="text" class="filterinput languagefilter" id="languagefilter"\t\t\t\t\t\t\tdata-clear="languagefilter-clear" data-suggestion="filtersuggestion"\t\t\t\t\t\t\tplaceholder="Language search" autocomplete="off" />\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="one column">\t\t\t\t\t<span id="languagefilter-clear" class="languagefilter-clear"></span>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="row uls-language-list"></div>\t\t\t<div class="row" id="settings-block"></div>\t\t</div> ',c=function(c,d){this.$element=a(c),this.options=a.extend({},a.fn.uls.defaults,d),this.$menu=a(b),this.languages=this.options.languages;for(var e in this.languages)void 0===a.uls.data.languages[e]&&(window.console&&window.console.log&&window.console.log("ULS: Unknown language "+e+"."),delete this.languages[e]);this.left=this.options.left,this.top=this.options.top,this.shown=!1,this.initialized=!1,this.$languageFilter=this.$menu.find("#languagefilter"),this.$regionFilters=this.$menu.find(".uls-region"),this.$resultsView=this.$menu.find("div.uls-language-list"),this.render(),this.listen(),this.ready()},c.prototype={constructor:c,ready:function(){this.options.onReady&&this.options.onReady.call(this)},visible:function(){this.options.onVisible&&this.options.onVisible.call(this)},position:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return{top:this.top||b.top+b.height,left:this.left||"25%"}},show:function(){this.$menu.css(this.position()),this.options.compact&&this.$menu.addClass("uls-compact"),this.initialized||(a("body").prepend(this.$menu),this.i18n(),this.defaultSearch(),this.initialized=!0),a(".uls-menu").hide(),this.$menu.show(),this.$menu.scrollIntoView(),this.shown=!0,this.isMobile()||this.$languageFilter.focus(),this.visible()},i18n:function(){a.i18n&&(this.$menu.find("[data-i18n]").i18n(),this.$languageFilter.prop("placeholder",a.i18n("uls-search-placeholder")))},defaultSearch:function(){this.$resultsView.lcd("empty"),this.$regionFilters.regionselector("show")},hide:function(){this.$menu.hide(),this.shown=!1},render:function(){},noresults:function(){this.$resultsView.lcd("noResults")},success:function(){this.$resultsView.show()},listen:function(){var b,c=this;c.$element.on("click",a.proxy(c.click,c)),c.$languageFilter.on("searchclear",a.proxy(c.defaultSearch,c)),c.$menu.find("#uls-close").on("click",a.proxy(c.cancel,c)),c.$menu.on("click",function(a){a.stopPropagation()}),c.$menu.on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$menu.on("keydown",a.proxy(this.keypress,this)),b=c.$resultsView.lcd({languages:c.languages,quickList:c.options.quickList,clickhandler:a.proxy(c.select,c),source:c.$languageFilter,showRegions:c.options.showRegions}).data("lcd"),c.$languageFilter.languagefilter({$target:b,languages:c.languages,success:function(){a(".regionselector").removeClass("active"),c.success()},noresults:function(){a(".regionselector").removeClass("active"),c.noresults()},searchAPI:c.options.searchAPI,onSelect:a.proxy(c.select,c)}),this.$menu.find(".uls-region, .uls-region-link").regionselector({$target:b,languages:c.languages,success:function(a){c.$languageFilter.languagefilter("deactivate"),1===a.regionGroup&&b.quicklist(),c.success()},noresults:function(){c.$languageFilter.languagefilter("clear")}}),a("html").click(a.proxy(this.hide,this))},select:function(a){this.hide(),this.$languageFilter.trigger("searchclear"),this.options.onSelect&&this.options.onSelect.call(this,a)},cancel:function(){this.hide(),this.options.onCancel&&this.options.onCancel.call(this)},keyup:function(a){this.shown&&27===a.keyCode&&(this.cancel(),a.preventDefault(),a.stopPropagation())},keypress:function(a){this.shown&&27===a.keyCode&&(this.cancel(),a.preventDefault(),a.stopPropagation())},click:function(a){a.stopPropagation(),a.preventDefault(),this.shown?this.hide():this.show()},eventSupported:function(a){var b=a in this.$menu;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},isMobile:function(){return navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)}},a.fn.uls=function(b){return this.each(function(){var d=a(this),e=d.data("uls"),f="object"==typeof b&&b;e||d.data("uls",e=new c(this,f)),"string"==typeof b&&e[b]()})},a.fn.uls.defaults={menu:b,onSelect:null,searchAPI:null,languages:a.uls.data.getAutonyms(),quickList:null,compact:!1,showRegions:["WW","AM","EU","ME","AF","AS","PA"]},a.fn.i18n||(a.fn.i18n=function(){}),a.fn.scrollIntoView=function(){return this.each(function(){var b,c=a(window),d=c.height(),e=c.scrollTop(),f=e+d,g=a(this),h=g.height(),i=g.offset().top,j=i+h;(i<e||j>f)&&(b=e>i?i:j-d,a("html, body").stop().animate({scrollTop:b},500))})},a.fn.uls.Constructor=c}(jQuery);